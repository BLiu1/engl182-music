function getArrayOfVideos(){return HTMLCollectionToArray(document.getElementsByClassName("music"))}function HTMLCollectionToArray(e){try{return Array.prototype.slice.call(e)}catch(i){for(var n=0,t=[];n<e.length;n++)t.push(e[n]);return t}}function toggleSingle(e){var n=this||e,t=n.children[0];t.muted=!t.muted;var i=n.children[1];i.style.zIndex=2==i.style.zIndex?0:2}function toggleAll(){for(var e=document.getElementsByClassName("vid-wrapper"),n=0;n<e.length;n++)toggleSingle(e[n])}function checkLoad(e){for(var n=0;n<e.length;n++)if(4!==e[n].readyState)return void setTimeout(function(){checkLoad(e)},100);startVideos(e)}function startVideos(e){for(var n=0;n<e.length;n++)e[n].play()}function syncVideos(e,n){for(var t=5,i=2,r=0,a=10,o=0;o<n.length;o++){var c=e.currentTime-n[o].currentTime;Math.abs(c)>t&&(n[o].currentTime=e.currentTime);var u=Math.min(Math.max(c*i+1,r),a).toFixed(2);u>.99&&u<1.01&&(u=1),n[o].playbackRate=u}}function checkLoop(){if(this.currentTime>=this.duration-.1)for(var e=0;e<videos.length;e++)videos[e].currentTime=0,videos[e].play()}!function(){for(var e=0,n=["webkit","moz","ms","o"],t=0;t<n.length&&!window.requestAnimationFrame;++t)window.requestAnimationFrame=window[n[t]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[t]+"CancelAnimationFrame"]||window[n[t]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),i=Math.max(0,16-(t-e)),r=window.setTimeout(function(){n(t+i)},i);return e=t+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();for(var addEvent=function(e,n,t){return e.addEventListener?(e.addEventListener(n,t,!1),!0):e.attachEvent?e.attachEvent("on"+n,t):(n="on"+n,"function"==typeof e[n]&&(t=function(e,n){return function(){e.apply(this,arguments),n.apply(this,arguments)}}(e[n],t)),e[n]=t,!0)},videos=getArrayOfVideos(),videoWrappers=document.getElementsByClassName("vid-wrapper"),i=0;i<videoWrappers.length;i++)addEvent(videoWrappers[i],"click",toggleSingle);checkLoad(videos),setInterval(function(){syncVideos(videos[0],videos.slice(1,videos.length))},100),addEvent(videos[0],"timeupdate",checkLoop),addEvent(document.getElementById("toggleAll"),"click",toggleAll);