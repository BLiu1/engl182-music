!function(){"use strict";!function(){for(var e=0,t=["webkit","moz","ms","o"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,n){var i=(new Date).getTime(),a=Math.max(0,16-(i-e)),o=window.setTimeout((function(){t(i+a)}),a);return e=i+a,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(e){clearTimeout(e)})}();var e=function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),!0):e.attachEvent?e.attachEvent("on"+t,n):("function"==typeof e[t="on"+t]&&(i=e[t],a=n,n=function(){i.apply(this,arguments),a.apply(this,arguments)}),e[t]=n,!0);var i,a},t=function(e){try{return Array.prototype.slice.call(e)}catch(i){for(var t=0,n=[];t<e.length;t++)n.push(e[t]);return n}}(document.getElementsByClassName("music")),n=document.getElementsByClassName("vid-wrapper");window.firstToggle=!1,setInterval((function(){!function(e,t){for(var n=.5,i=2,a=.1,o=10,r=0;r<t.length;r++){var m=e.currentTime-t[r].currentTime;Math.abs(m)>n&&(t[r].currentTime=e.currentTime);var c=Math.min(Math.max(m*i+e.playbackRate,a),o).toFixed(3);c>.99&&c<1.01&&(c=1),t[r].playbackRate=c}}(t[0],t.slice(1,t.length))}),100),e(t[0],"timeupdate",(function(){if(this.currentTime>=this.duration-.1)for(var e=0;e<t.length;e++)t[e].currentTime=0,t[e].play()})),e(document.getElementById("link"),"click",(function(e){l(e,!0)}));for(var i=0;i<n.length;i++)e(n[i],"click",r);var a=document.getElementsByClassName("control");for(i=0;i<a.length;i++)e(a[i],"click",(function(){this.blur()}));e(document.getElementById("togglePlayPause"),"click",l),e(document.getElementById("restartAll"),"click",s),e(document.getElementById("muteAll"),"click",c),e(document.getElementById("toggleAll"),"click",m);var o=new window.keypress.Listener;function r(e,t){var n=t||this,i=n.children[0];i.muted=!i.muted;var a=n.children[1];if(a.classList.toggle("cover-on"),a.classList.toggle("cover-off"),!window.firstToggle){document.getElementsByClassName("content")[0].classList.remove("firstToggle");var o=document.getElementById("tip");o.parentNode.removeChild(o);for(var r=document.getElementsByClassName("music"),m=0;m<r.length;m++)r[m].play();u()}window.firstToggle=!0}function m(){for(var e=document.getElementsByClassName("vid-wrapper"),t=0;t<e.length;t++)r(0,e[t])}function c(){for(var e=document.getElementsByClassName("vid-wrapper"),t=0;t<e.length;t++){e[t].children[0].muted=!0;var n=e[t].children[1];n.classList.add("cover-on"),n.classList.remove("cover-off")}}function l(e,t){var n=document.getElementsByClassName("music");t=t||!1;if(n[0].paused&&!t)for(var i=0;i<n.length;i++)n[i].play();else for(i=0;i<n.length;i++)n[i].pause();u()}function s(){for(var e=document.getElementsByClassName("music"),t=0;t<e.length;t++)e[t].currentTime=0;u()}function u(){var e=document.getElementsByClassName("music")[0].paused,t=document.getElementById("togglePlayPause").children[0];e?(t.src="img/play.svg",t.alt="Play"):(t.src="img/pause.svg",t.alt="Pause")}o.simple_combo("space",l),o.simple_combo("p",l),o.simple_combo("enter",s),o.simple_combo("r",s),o.simple_combo("m",c),o.simple_combo("s",m),o.simple_combo("t",m),o.simple_combo("i",m),c()}();